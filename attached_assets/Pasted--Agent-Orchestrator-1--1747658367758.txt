# Agent Orchestrator ‚Äî –≠–∫—Ä–∞–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞–º–∏

## 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞

–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É, –≥–¥–µ DevOps-–∏–Ω–∂–µ–Ω–µ—Ä, —Ç–∏–º–ª–∏–¥ –æ—Ç–¥–µ–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –±–∏–∑–Ω–µ—Å-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç:

* –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ **–∞–≥–µ–Ω—Ç—ã** (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã / LLM-–≤–æ—Ä–∫—Ñ–ª–æ—É) —Å–∏—Å—Ç–µ–º—ã Agent Smith.
* –í–∏–¥–µ—Ç—å –∏—Ö —Å—Ç–∞—Ç—É—Å, –≤–µ—Ä—Å–∏—é, SLA, –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏.
* –ú—è–≥–∫–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å, –æ–±–Ω–æ–≤–ª—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–µ–≤–∏–∑–∏–∏ **–±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞**.
* –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ (–∫–∞—Å—Ç–æ–º–Ω—ã–µ) –∞–≥–µ–Ω—Ç—ã –Ω–∞ –±–∞–∑–µ –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ Wizard-–æ–º ¬´–≤ 3 —à–∞–≥–∞¬ª.

---

## 2. –ö–∞—Ç–∞–ª–æ–≥ –±–∞–∑–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

| ‚Ññ | –ò–º—è –∞–≥–µ–Ω—Ç–∞                  | –†–æ–ª—å –≤ —Ü–µ–ø–æ—á–∫–µ                                     | –¢—Ä–∏–≥–≥–µ—Ä                        | –í—Ö–æ–¥                             | –í—ã—Ö–æ–¥                                 | –ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏                     |
| - | --------------------------- | -------------------------------------------------- | ------------------------------ | -------------------------------- | ------------------------------------- | --------------------------------- |
| 1 | **Inbound Gateway Agent**   | –ü—Ä–∏—ë–º HTTP/Webhook, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è | POST-–∑–∞–ø—Ä–æ—Å –æ—Ç —Ñ–æ—Ä–º—ã / –∫–∞–Ω–∞–ª–æ–≤ | Raw JSON, JWT-sub                | Kafka `inbound.messages`, S3 raw      | *gateway.access*, *schema*-errors |
| 2 | **Identity Resolver Agent** | –ú–∞p–ø–∏–Ω–≥ multi-channel ID ‚Üí `contact_id`            | –°–æ–æ–±—â–µ–Ω–∏–µ –≤ Kafka              | `contact_identity`, external ids | `contact_id`                          | *resolver*-audit                  |
| 3 | **Classifier Agent**        | Intent / priority / dept ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è          | –°–æ–æ–±—â–µ–Ω–∏–µ —Å `contact_id`       | Text, meta                       | `intent`, `priority`, `department_id` | *classifier.prompts*, latency     |
| 4 | **Routing Agent**           | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞, –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ dept-–æ—á–µ—Ä–µ–¥—å         | –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü. msg                 | Ticket draft                     | `ticket_id`, Kafka dept queue         | *router*-sql, *sla* set           |
| 5 | **Department RAG Agent**    | –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç (LLM + KB)                               | Ticket open, RAG-call          | KB embeddings                    | Draft reply / confidence              | *rag*-trace, passages             |
| 6 | **Outbound Comms Agent**    | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É –≤ –∫–∞–Ω–∞–ª                 | Ticket comment                 | msg, attach                      | Channel API call                      | *outbound*-gateway                |
| 7 | **Compliance Logger Agent** | –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±–ª–æ–∫—á–µ–π–Ω     | `ticket_closed` event          | file CID, tx                     | Polygon txid                          | *chain.tx*, *ipfs.pin*            |
| 8 | **SLA Monitor Agent**       | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–æ–≤, —ç—Å–∫–∞–ª–∞—Ü–∏–∏                         | Cron / Prometheus              | Tickets, SLA                     | alert event                           | *sla.alerts*                      |
| 9 | **Archiver Agent**          | –ê—Ä—Ö–∏–≤–∞—Ü–∏—è resolved —Ç–∏–∫–µ—Ç–æ–≤, Glacier lifecycle      | Ticket age > 30d               | JSON + files                     | Glacier vault                         | *archiver*-log                    |

> **–ü—Ä–∏–Ω—Ü–∏–ø plug-and-play**: –∫–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å gRPC/HTTP health-—á–µ–∫, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Service Registry. Router –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–ª–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –µ—Å–ª–∏ `enabled=true`.

---

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —ç–∫—Ä–∞–Ω–∞

### 3.1. –õ–µ–π–∞—É—Ç (Wireframe)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Top Bar  |  Search ‚Ä¶ üîç ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Sidebar‚îÇ  Agents Grid   ‚îÇ
‚îÇ (Nav)   ‚îÇ  ‚Ä¢ Card list    ‚îÇ
‚îÇ         ‚îÇ  ‚Ä¢ + New Agent  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

* **Sidebar**

  * *Overview*
  * *Agents* (current)
  * *Org Structure*
  * *Knowledge Base*
  * *Settings*

* **Agents Grid (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å)**  ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ 4√óN:

  * **Badge Online/Degraded/Offline**
  * –ò–º—è –∞–≥–µ–Ω—Ç–∞ + –≤–µ—Ä—Å–∏—è (e.g. `Classifier v1.4.2`)
  * SLA-label (p-50 latency / error rate)
  * Actions: ‚ñ∏ View | ‚ü≥ Restart | ‚öô Config | ‚Ü∂ Rollback ‚Ü¥

* **+ New Agent** ‚Äî Floating Action Button, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç **Wizard**.

### 3.2. –ü–∞–Ω–µ–ª—å –¥–µ—Ç–∞–ª–µ–π (modal / drawer)

Tabs:

1. **Overview** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏, –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–æ–≤ (PlantUML), —Ç–µ–∫—É—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
2. **Config** ‚Äî JSON Schema form (React Hook Form + Zod), instant preview diff.
3. **Metrics** ‚Äî Grafana iFrame —Å –¥–∞—à–±–æ—Ä–¥–æ–º –∞–≥–µ–Ω—Ç–∞ (latency, TPS, errors).
4. **Logs** ‚Äî live tail (Loki) —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ Trace-ID.
5. **Versions** ‚Äî –ª–∏—Å—Ç –∫–æ–º–º–∏—Ç–æ–≤ (Git tag, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä digest), –∫–Ω–æ–ø–∫–∞ **Promote ‚Üí Prod**.

---

## 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ (Wizard 3-step)

| –®–∞–≥ | UI-—ç–∫—Ä–∞–Ω             | –î–µ–π—Å—Ç–≤–∏–µ                                                                          |
| --- | -------------------- | --------------------------------------------------------------------------------- |
| 1   | **Template Select**  | –í—ã–±—Ä–∞—Ç—å –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ (HTTP listener, Cron job, LLM-chain) –∏–ª–∏ ¬´–ø—É—Å—Ç–æ–π¬ª Dockerfile. |
| 2   | **Config & Secrets** | –ó–∞–ø–æ–ª–Ω–∏—Ç—å YAML/JSON, –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ HashiCorp Vault.                     |
| 3   | **SLA & Rollout**    | –£–∫–∞–∑–∞—Ç—å —Ü–µ–ª–µ–≤—É—é –æ—á–µ—Ä–µ–¥—å, SLA-—Ü–µ–ª—å, canary % –∏ alert-channel. ‚Üí *Finish*           |

–ü–æ—Å–ª–µ Finish:

* CI/CD –∑–∞–ø—É—Å–∫–∞–µ—Ç build ‚Üí pushes image –≤ Registry.
* Service Registry –ø–æ–ª—É—á–∞–µ—Ç `POST /register`.
* Router –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–π `agent_id` —Å flag `enabled=false` ‚Üí –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤–∫–ª—é—á–∞–µ—Ç.
* –í—Å–µ —Å–æ–±—ã—Ç–∏—è, health-—á–µ–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.

---

## 5. –õ–æ–≥–∏–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ–µ–≤

1. –ü—Ä–∏ **–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏** –∞–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–æ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–µ–π (`blue-green`).
2. Router –ø–æ—Å—ã–ª–∞–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ —Ç–æ–ª—å–∫–æ health-OK.
3. Flask endpoint `/lifecycle/pre-stop` –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –ø—É—Å—Ç–æ–π –æ—á–µ—Ä–µ–¥–∏ –∏ –æ—Ç–¥–∞—ë—Ç 200.
4. –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –Ω–æ–≤–∞—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è active.
5. –í—Å–µ —à–∞–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ `deployment_audit` (timestamp, version\_from, version\_to, user\_id).

---

## 6. RBAC

| –†–æ–ª—å               | –î–æ—Å—Ç—É–ø –∫ –¥–µ–π—Å—Ç–≤–∏—è–º                            |
| ------------------ | --------------------------------------------- |
| **Admin**          | CRUD –∞–≥–µ–Ω—Ç–æ–≤, –∫–æ–Ω—Ñ–∏–≥–∏, rollback               |
| **DevOps**         | View, edit config, deploy                     |
| **Data Scientist** | View logs/metrics, upload –º–æ–¥–µ–ª—å (Classifier) |
| **Operator**       | View status, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫                       |

---

## 7. –°—Ç–µ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞

* **Frontend**: React + TypeScript, Shadcn UI, TanStack Table, React Query, Tailwind.
* **Backend**: FastAPI (Python) ‚Üí Service Registry (Redis)
* **CI/CD**: GitHub Actions ‚Üí ArgoCD ‚Üí K8s.
* **Observability**: Loki+Grafana, OpenTelemetry JS/OTLP.

---

### KPI, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–∑—É –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

* üí° *Live agents*: 9/9 online
* ‚ö†Ô∏è *Error rate (1 h)*: 0.12 %
* üïí *Avg routing latency*: 520 ms
* ‚è≥ *Tickets in queue*: 37

–° –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ —á–µ—Ä–µ–∑ WebSocket.

---

> **–ò—Ç–æ–≥**: –≠–∫—Ä–∞–Ω ¬´Agent Orchestrator¬ª –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞-–∞–≥–µ–Ω—Ç–∞, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è —Ä–∏—Å–∫ —Å–±–æ–µ–≤ –∏ —Å–Ω–∏–∂–∞—è time-to-market –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.
